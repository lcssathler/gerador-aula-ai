<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Gerador de Planos de Aula</title>
  <style>
    body{font-family:sans-serif;margin:2rem}
    form{display:grid;gap:8px;max-width:480px}
    input,select,textarea,button{padding:8px}
    pre{background:#f4f4f4;padding:1em;border-radius:6px}
  </style>
</head>
<body>
  <h1>Gerador de Planos de Aula</h1>
  <form id="form">
    <input name="tema" placeholder="Tema" required />
    <input name="serie" placeholder="Série" required />
    <input name="disciplina" placeholder="Disciplina" required />
    <input name="duracao" type="number" placeholder="Duração (minutos)" required />
    <select name="nivel_dificuldade" required>
      <option value="">Selecione...</option>
      <option>Básico</option>
      <option>Intermediário</option>
      <option>Avançado</option>
    </select>
    <textarea name="contexto" placeholder="Contexto opcional"></textarea>
    <button type="submit">Gerar Plano</button>
  </form>

  <div id="resultado"></div>

  <script>
    const form = document.getElementById("form");
    const resultado = document.getElementById("resultado");

    form.addEventListener("submit", async (e) => {
      e.preventDefault();
      resultado.innerHTML = "<p>Gerando plano...</p>";

      const data = Object.fromEntries(new FormData(form));
      const resp = await fetch("/api/gerar-plano", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      const json = await resp.json();
      if (json.plano) {
        resultado.innerHTML = "<pre>" + JSON.stringify(json.plano, null, 2) + "</pre>";
      } else {
        resultado.innerHTML = `<p style="color:red">Erro: ${json.erro || "Falha desconhecida"}</p>`;
      }
    });
  </script>
</body>
</html>
